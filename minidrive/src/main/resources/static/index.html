<!DOCTYPE html>
<html>
<head>
    <title>Mini Drive</title>
</head>
<body>

<h2>Mini Drive</h2>

<!-- UPLOAD -->
<form method="post"
      action="/api/upload"
      enctype="multipart/form-data">

    <input type="file" name="file" required />
    <br><br>
    <button type="submit">Upload</button>
</form>

<hr>

<!-- LIST FILES -->
<button onclick="listFiles()">List Files</button>
<ul id="fileList"></ul>

<script>
    function listFiles() {
        fetch("/api/files")
            .then(res => res.json())
            .then(data => {
                const ul = document.getElementById("fileList");
                ul.innerHTML = "";
                data.data.forEach(file => {
                    const li = document.createElement("li");

                    li.innerHTML = `
                        ${file.name}
                        <a href="/api/download/${file.name}">Download</a>
                        <button onclick="deleteFile('${file.name}')">Delete</button>
                    `;

                    ul.appendChild(li);
                });
            });
    }

    function deleteFile(name) {
        fetch(`/api/delete/${name}`, { method: "DELETE" })
            .then(() => listFiles());
    }
</script>

</body>
</html>
