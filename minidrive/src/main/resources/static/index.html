<!DOCTYPE html>
<html>
<head>
    <title>Mini Drive</title>
</head>
<body>

<h2>Mini Drive</h2>

<form method="post" action="/api/upload" enctype="multipart/form-data">
    <input type="file" name="file" required />
    <br><br>
    <button type="submit">Upload</button>
</form>

<hr>

<button onclick="listFiles()">List Files</button>

<table border="1">
    <tbody id="fileTable"></tbody>
</table>

<script>
    function listFiles() {
        fetch("/api/files")
            .then(res => res.json())
            .then(data => {
                const table = document.getElementById("fileTable");
                table.innerHTML = "";

                data.data.forEach(file => {
                    table.innerHTML += `
                        <tr>
                            <td>${file.name}</td>
                            <td>${file.uploadedAt}</td>
                            <td>
                                <a href="/api/download/${file.name}">Download</a>
                            </td>
                        </tr>
                    `;
                });
            });
    }
</script>

</body>
</html>
